{"remainingRequest":"C:\\GitCrypto\\front_end\\node_modules\\thread-loader\\dist\\cjs.js!C:\\GitCrypto\\front_end\\node_modules\\babel-loader\\lib\\index.js!C:\\GitCrypto\\front_end\\node_modules\\cache-loader\\dist\\cjs.js??ref--0-0!C:\\GitCrypto\\front_end\\node_modules\\vue-loader\\lib\\index.js??vue-loader-options!C:\\GitCrypto\\front_end\\src\\components\\Modal\\MakePotion.vue?vue&type=script&lang=js&","dependencies":[{"path":"C:\\GitCrypto\\front_end\\src\\components\\Modal\\MakePotion.vue","mtime":1620499713478},{"path":"C:\\GitCrypto\\front_end\\node_modules\\cache-loader\\dist\\cjs.js","mtime":499162500000},{"path":"C:\\GitCrypto\\front_end\\node_modules\\thread-loader\\dist\\cjs.js","mtime":499162500000},{"path":"C:\\GitCrypto\\front_end\\node_modules\\babel-loader\\lib\\index.js","mtime":499162500000},{"path":"C:\\GitCrypto\\front_end\\node_modules\\cache-loader\\dist\\cjs.js","mtime":499162500000},{"path":"C:\\GitCrypto\\front_end\\node_modules\\vue-loader\\lib\\index.js","mtime":499162500000}],"contextDependencies":[],"result":[{"type":"Buffer","data":"base64:aW1wb3J0ICJjb3JlLWpzL21vZHVsZXMvZXMubnVtYmVyLnRvLWZpeGVkIjsKaW1wb3J0ICJjb3JlLWpzL21vZHVsZXMvZXMub2JqZWN0LnRvLXN0cmluZyI7CmltcG9ydCAiY29yZS1qcy9tb2R1bGVzL2VzLnJlZ2V4cC5leGVjIjsKaW1wb3J0ICJjb3JlLWpzL21vZHVsZXMvZXMucmVnZXhwLnRvLXN0cmluZyI7CmltcG9ydCAiY29yZS1qcy9tb2R1bGVzL2VzLnN0cmluZy5zcGxpdCI7CmltcG9ydCAiY29yZS1qcy9tb2R1bGVzL2VzLnN0cmluZy5zdHJpa2UiOwppbXBvcnQgInJlZ2VuZXJhdG9yLXJ1bnRpbWUvcnVudGltZSI7CmltcG9ydCBfYXN5bmNUb0dlbmVyYXRvciBmcm9tICJDOi9HaXRDcnlwdG8vZnJvbnRfZW5kL25vZGVfbW9kdWxlcy9AYmFiZWwvcnVudGltZS9oZWxwZXJzL2VzbS9hc3luY1RvR2VuZXJhdG9yIjsKaW1wb3J0IF9zbGljZWRUb0FycmF5IGZyb20gIkM6L0dpdENyeXB0by9mcm9udF9lbmQvbm9kZV9tb2R1bGVzL0BiYWJlbC9ydW50aW1lL2hlbHBlcnMvZXNtL3NsaWNlZFRvQXJyYXkiOwppbXBvcnQgX29iamVjdFNwcmVhZCBmcm9tICJDOi9HaXRDcnlwdG8vZnJvbnRfZW5kL25vZGVfbW9kdWxlcy9AYmFiZWwvcnVudGltZS9oZWxwZXJzL2VzbS9vYmplY3RTcHJlYWQyIjsKLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KaW1wb3J0IGJzIGZyb20gJ2JsYWNrLXNjaG9sZXMnOwppbXBvcnQgeyBtYXBBY3Rpb25zLCBtYXBTdGF0ZSB9IGZyb20gJ3Z1ZXgnOwppbXBvcnQgeyBnZXRQcmVtaXVtRGVwb3NpdCB9IGZyb20gJy4uLy4uL2hlbHBlcnMvdXRpbHMnOwpleHBvcnQgZGVmYXVsdCB7CiAgcHJvcHM6IFsnb3BlbicsICdmb3JtJ10sCiAgZGF0YTogZnVuY3Rpb24gZGF0YSgpIHsKICAgIHJldHVybiB7CiAgICAgIGlzQ29tcGxldGVkOiBmYWxzZSwKICAgICAgaXNMb2FkaW5nOiBmYWxzZSwKICAgICAgaXNBcHByb3ZlZDogdHJ1ZSwKICAgICAgaXNDb25maXJtZWQ6IGZhbHNlLAogICAgICBhdXRvUHJpY2U6IHRydWUsCiAgICAgIHByaWNlOiAwCiAgICB9OwogIH0sCiAgY29tcHV0ZWQ6IF9vYmplY3RTcHJlYWQoX29iamVjdFNwcmVhZCh7fSwgbWFwU3RhdGUoWydzZXR0aW5ncyddKSksIHt9LCB7CiAgICBjdXJyZW50UHJpY2U6IGZ1bmN0aW9uIGN1cnJlbnRQcmljZSgpIHsKICAgICAgcmV0dXJuIHRoaXMuc2V0dGluZ3MuZXhjaGFuZ2VSYXRlc1t0aGlzLmZvcm0uYXNzZXRdICYmIHRoaXMuc2V0dGluZ3MuZXhjaGFuZ2VSYXRlc1t0aGlzLmZvcm0uYXNzZXRdLnVzZCA/IHRoaXMuc2V0dGluZ3MuZXhjaGFuZ2VSYXRlc1t0aGlzLmZvcm0uYXNzZXRdLnVzZC50b0ZpeGVkKDIpIDogMDsKICAgIH0sCiAgICBkYXlzVG9FeHBpcnk6IGZ1bmN0aW9uIGRheXNUb0V4cGlyeSgpIHsKICAgICAgdmFyIG9uZURheSA9IDI0ICogNjAgKiA2MCAqIDFlMzsKCiAgICAgIHZhciBfdGhpcyRmb3JtJGV4cGlyeSRzcGwgPSB0aGlzLmZvcm0uZXhwaXJ5LnNwbGl0KCctJyksCiAgICAgICAgICBfdGhpcyRmb3JtJGV4cGlyeSRzcGwyID0gX3NsaWNlZFRvQXJyYXkoX3RoaXMkZm9ybSRleHBpcnkkc3BsLCAzKSwKICAgICAgICAgIHllYXIgPSBfdGhpcyRmb3JtJGV4cGlyeSRzcGwyWzBdLAogICAgICAgICAgbW9udGggPSBfdGhpcyRmb3JtJGV4cGlyeSRzcGwyWzFdLAogICAgICAgICAgZGF5ID0gX3RoaXMkZm9ybSRleHBpcnkkc3BsMlsyXTsKCiAgICAgIHZhciB0b2RheSA9IG5ldyBEYXRlKCk7CiAgICAgIHZhciBleHBpcnlEYXRlID0gbmV3IERhdGUocGFyc2VJbnQoeWVhciksIHBhcnNlSW50KG1vbnRoKSAtIDEsIHBhcnNlSW50KGRheSkgKyAxKTsKICAgICAgcmV0dXJuIE1hdGgucm91bmQoTWF0aC5hYnMoKHRvZGF5IC0gZXhwaXJ5RGF0ZSkgLyBvbmVEYXkpKTsKICAgIH0sCiAgICBwcmVtaXVtRGVwb3NpdDogZnVuY3Rpb24gcHJlbWl1bURlcG9zaXQoKSB7CiAgICAgIHJldHVybiBnZXRQcmVtaXVtRGVwb3NpdCh0aGlzLmZvcm0uc3RyaWtlLCB0aGlzLnByaWNlLCB0aGlzLmRheXNUb0V4cGlyeSk7CiAgICB9CiAgfSksCiAgbWV0aG9kczogX29iamVjdFNwcmVhZChfb2JqZWN0U3ByZWFkKHt9LCBtYXBBY3Rpb25zKFsnbG9naW4nLCAnYXBwcm92ZScsICd3cml0ZU1pbnRQb3Rpb24nLCAnbG9hZFBvdGlvbnMnXSkpLCB7fSwgewogICAgaGFuZGxlU3VibWl0OiBmdW5jdGlvbiBoYW5kbGVTdWJtaXQoKSB7CiAgICAgIHZhciBfdGhpcyA9IHRoaXM7CgogICAgICByZXR1cm4gX2FzeW5jVG9HZW5lcmF0b3IoIC8qI19fUFVSRV9fKi9yZWdlbmVyYXRvclJ1bnRpbWUubWFyayhmdW5jdGlvbiBfY2FsbGVlKCkgewogICAgICAgIHZhciBwYXlsb2FkOwogICAgICAgIHJldHVybiByZWdlbmVyYXRvclJ1bnRpbWUud3JhcChmdW5jdGlvbiBfY2FsbGVlJChfY29udGV4dCkgewogICAgICAgICAgd2hpbGUgKDEpIHsKICAgICAgICAgICAgc3dpdGNoIChfY29udGV4dC5wcmV2ID0gX2NvbnRleHQubmV4dCkgewogICAgICAgICAgICAgIGNhc2UgMDoKICAgICAgICAgICAgICAgIF90aGlzLmlzTG9hZGluZyA9IHRydWU7CgogICAgICAgICAgICAgICAgaWYgKCFfdGhpcy5pc0FwcHJvdmVkKSB7CiAgICAgICAgICAgICAgICAgIF9jb250ZXh0Lm5leHQgPSAxMjsKICAgICAgICAgICAgICAgICAgYnJlYWs7CiAgICAgICAgICAgICAgICB9CgogICAgICAgICAgICAgICAgX3RoaXMuaXNDb25maXJtZWQgPSB0cnVlOwogICAgICAgICAgICAgICAgX3RoaXMuaXNMb2FkaW5nID0gZmFsc2U7CiAgICAgICAgICAgICAgICBwYXlsb2FkID0gewogICAgICAgICAgICAgICAgICBhc3NldDogX3RoaXMuZm9ybS5hc3NldCwKICAgICAgICAgICAgICAgICAgc3RyaWtlOiBfdGhpcy5mb3JtLnN0cmlrZSwKICAgICAgICAgICAgICAgICAgZXhwaXJ5OiBfdGhpcy5mb3JtLmV4cGlyeSwKICAgICAgICAgICAgICAgICAgcXVhbnRpdHk6IF90aGlzLmZvcm0ucXVhbnRpdHksCiAgICAgICAgICAgICAgICAgIHByaWNlOiBfdGhpcy5wcmljZSwKICAgICAgICAgICAgICAgICAgcHJlbWl1bTogX3RoaXMucHJlbWl1bURlcG9zaXQudG9TdHJpbmcoKQogICAgICAgICAgICAgICAgfTsKICAgICAgICAgICAgICAgIF9jb250ZXh0Lm5leHQgPSA3OwogICAgICAgICAgICAgICAgcmV0dXJuIF90aGlzLndyaXRlTWludFBvdGlvbihwYXlsb2FkKTsKCiAgICAgICAgICAgICAgY2FzZSA3OgogICAgICAgICAgICAgICAgX2NvbnRleHQubmV4dCA9IDk7CiAgICAgICAgICAgICAgICByZXR1cm4gX3RoaXMubG9hZFBvdGlvbnMoKTsKCiAgICAgICAgICAgICAgY2FzZSA5OgogICAgICAgICAgICAgICAgX3RoaXMuaXNDb21wbGV0ZWQgPSB0cnVlOwogICAgICAgICAgICAgICAgX2NvbnRleHQubmV4dCA9IDE2OwogICAgICAgICAgICAgICAgYnJlYWs7CgogICAgICAgICAgICAgIGNhc2UgMTI6CiAgICAgICAgICAgICAgICBfY29udGV4dC5uZXh0ID0gMTQ7CiAgICAgICAgICAgICAgICByZXR1cm4gX3RoaXMuYXBwcm92ZSgpOwoKICAgICAgICAgICAgICBjYXNlIDE0OgogICAgICAgICAgICAgICAgX3RoaXMuaXNBcHByb3ZlZCA9IHRydWU7CiAgICAgICAgICAgICAgICBfdGhpcy5pc0xvYWRpbmcgPSBmYWxzZTsKCiAgICAgICAgICAgICAgY2FzZSAxNjoKICAgICAgICAgICAgICBjYXNlICJlbmQiOgogICAgICAgICAgICAgICAgcmV0dXJuIF9jb250ZXh0LnN0b3AoKTsKICAgICAgICAgICAgfQogICAgICAgICAgfQogICAgICAgIH0sIF9jYWxsZWUpOwogICAgICB9KSkoKTsKICAgIH0KICB9KSwKICB3YXRjaDogewogICAgb3BlbjogZnVuY3Rpb24gb3BlbigpIHsKICAgICAgdGhpcy5hdXRvUHJpY2UgPSB0cnVlOwogICAgICB0aGlzLnByaWNlID0gdGhpcy5jdXJyZW50UHJpY2U7CiAgICAgIHRoaXMuaXNMb2FkaW5nID0gZmFsc2U7CiAgICAgIHRoaXMuaXNDb25maXJtZWQgPSBmYWxzZTsKICAgICAgdGhpcy5pc0NvbXBsZXRlZCA9IGZhbHNlOwogICAgfSwKICAgIGF1dG9QcmljZTogZnVuY3Rpb24gYXV0b1ByaWNlKHZhbHVlKSB7CiAgICAgIGlmICh2YWx1ZSkgdGhpcy5wcmljZSA9IHRoaXMuY3VycmVudFByaWNlOwogICAgfQogIH0sCiAgY3JlYXRlZDogZnVuY3Rpb24gY3JlYXRlZCgpIHsKICAgIHZhciBkYWlBZGRyZXNzID0gcHJvY2Vzcy5lbnYuVlVFX0FQUF9EQUlfQUREUkVTUzsKICAgIHZhciBkYWlBbGxvd2FuY2UgPSBwYXJzZUZsb2F0KHRoaXMuc2V0dGluZ3MuYWxsb3dhbmNlc1tkYWlBZGRyZXNzXSB8fCAnMCcpOwogICAgdGhpcy5pc0FwcHJvdmVkID0gISFkYWlBbGxvd2FuY2U7CiAgfQp9Ow=="},{"version":3,"sources":["MakePotion.vue"],"names":[],"mappings":"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","sourcesContent":["<template>\r\n  <Modal :open=\"open\" @close=\"$emit('close')\">\r\n    <div class=\"modal-body px-4\">\r\n      <div v-if=\"!isConfirmed\">\r\n        <h2 class=\"mb-5\">Your recipe</h2>\r\n        <div class=\"text-left\">\r\n          <div class=\"border-bottom mb-5\">\r\n            <div class=\"mb-4\">\r\n              Strike price<span class=\"float-right\">${{ $n(form.strike) }}</span>\r\n            </div>\r\n            <div class=\"mb-4\">\r\n              Expiry date\r\n              <span class=\"float-right\" v-text=\"form.expiry\" />\r\n            </div>\r\n            <div class=\"mb-4\">\r\n              Asset\r\n              <Ticker class=\"float-right\" :id=\"form.asset\" />\r\n            </div>\r\n            <div class=\"mb-3\">\r\n              Auto price\r\n              <span class=\"float-right\">\r\n                <VueSwitch v-model=\"autoPrice\" />\r\n              </span>\r\n            </div>\r\n            <div class=\"mb-5\">\r\n              <input\r\n                :readonly=\"autoPrice\"\r\n                type=\"number\"\r\n                class=\"input mb-3\"\r\n                placeholder=\"Price\"\r\n                v-model=\"price\"\r\n              />\r\n              <h6 v-if=\"!autoPrice\">\r\n                Using non-market prices may result in losses.\r\n                <a\r\n                  href=\"https://potion.gitbook.io/docs/exercising-a-potion/buying-a-potion\"\r\n                  target=\"_blank\"\r\n                >\r\n                  Learn more\r\n                </a>\r\n              </h6>\r\n            </div>\r\n          </div>\r\n          <div class=\"mb-4\">\r\n            Quantity<span class=\"float-right\">{{ $n(form.quantity) }}</span>\r\n          </div>\r\n          <div class=\"mb-4\">\r\n            Deposit per potion<span class=\"float-right\">{{ $n(premiumDeposit) }} BUSD</span>\r\n          </div>\r\n          <div class=\"mb-5 text-bold text-primary\">\r\n            Total deposit<span class=\"float-right\"\r\n              >{{ $n(form.quantity * premiumDeposit) }} BUSD</span\r\n            >\r\n          </div>\r\n        </div>\r\n        <h2 class=\"mb-4\">Want to purchase?</h2>\r\n        <div class=\"d-flex mb-2\">\r\n          <button class=\"button button-outline col-6 mr-2\" @click=\"$emit('close')\">Cancel</button>\r\n          <button class=\"button button-primary col-6 ml-2\" @click=\"handleSubmit\">\r\n            <VueLoadingIndicator v-if=\"isLoading\" class=\"big\" />\r\n            <template v-else>\r\n              <template v-if=\"isApproved\">Confirm</template>\r\n              <template v-else>Unlock BUSD</template>\r\n            </template>\r\n          </button>\r\n        </div>\r\n      </div>\r\n      <div v-else>\r\n        <h2 class=\"mb-5\">Mix, turn and pour</h2>\r\n        <VueLoadingIndicator class=\"loading-lg mb-5\" v-if=\"!isCompleted\" />\r\n        <img v-else src=\"~/@/assets/check.svg\" height=\"118\" class=\"mb-5\" />\r\n        <p class=\"mb-5\">\r\n          Potion for <Ticker :id=\"form.asset\" type=\"short\" class=\"ml-1\" /> at ${{\r\n            $n(form.strike)\r\n          }}\r\n          on {{ form.expiry }}\r\n        </p>\r\n        <h2 class=\"mb-5\" v-if=\"!isCompleted\">Wait for creation…</h2>\r\n        <h2 class=\"mb-5\" v-else>Potion created!</h2>\r\n        <div>\r\n          <a @click=\"$emit('close')\" class=\"col-6 button button-outline\">\r\n            Back to home\r\n          </a>\r\n        </div>\r\n      </div>\r\n    </div>\r\n  </Modal>\r\n</template>\r\n\r\n<script>\r\nimport bs from 'black-scholes';\r\nimport { mapActions, mapState } from 'vuex';\r\nimport { getPremiumDeposit } from '../../helpers/utils';\r\n\r\nexport default {\r\n  props: ['open', 'form'],\r\n  data() {\r\n    return {\r\n      isCompleted: false,\r\n      isLoading: false,\r\n      isApproved: true,\r\n      isConfirmed: false,\r\n      autoPrice: true,\r\n      price: 0\r\n    };\r\n  },\r\n  computed: {\r\n    ...mapState(['settings']),\r\n    currentPrice() {\r\n      return this.settings.exchangeRates[this.form.asset] &&\r\n        this.settings.exchangeRates[this.form.asset].usd\r\n        ? this.settings.exchangeRates[this.form.asset].usd.toFixed(2)\r\n        : 0;\r\n    },\r\n    daysToExpiry() {\r\n      const oneDay = 24 * 60 * 60 * 1e3;\r\n      const [year, month, day] = this.form.expiry.split('-');\r\n      const today = new Date();\r\n      const expiryDate = new Date(parseInt(year), parseInt(month) - 1, parseInt(day) + 1);\r\n      return Math.round(Math.abs((today - expiryDate) / oneDay));\r\n    },\r\n    premiumDeposit() {\r\n      return getPremiumDeposit(this.form.strike, this.price, this.daysToExpiry);\r\n    }\r\n  },\r\n  methods: {\r\n    ...mapActions(['login', 'approve', 'writeMintPotion', 'loadPotions']),\r\n    async handleSubmit() {\r\n      this.isLoading = true;\r\n      if (this.isApproved) {\r\n        this.isConfirmed = true;\r\n        this.isLoading = false;\r\n        const payload = {\r\n          asset: this.form.asset,\r\n          strike: this.form.strike,\r\n          expiry: this.form.expiry,\r\n          quantity: this.form.quantity,\r\n          price: this.price,\r\n          premium: this.premiumDeposit.toString()\r\n        };\r\n        await this.writeMintPotion(payload);\r\n        await this.loadPotions();\r\n        this.isCompleted = true;\r\n      } else {\r\n        await this.approve();\r\n        this.isApproved = true;\r\n        this.isLoading = false;\r\n      }\r\n    }\r\n  },\r\n  watch: {\r\n    open() {\r\n      this.autoPrice = true;\r\n      this.price = this.currentPrice;\r\n      this.isLoading = false;\r\n      this.isConfirmed = false;\r\n      this.isCompleted = false;\r\n    },\r\n    autoPrice(value) {\r\n      if (value) this.price = this.currentPrice;\r\n    }\r\n  },\r\n  created() {\r\n    const daiAddress = process.env.VUE_APP_DAI_ADDRESS;\r\n    const daiAllowance = parseFloat(this.settings.allowances[daiAddress] || '0');\r\n    this.isApproved = !!daiAllowance;\r\n  }\r\n};\r\n</script>\r\n"],"sourceRoot":"src/components/Modal"}]}